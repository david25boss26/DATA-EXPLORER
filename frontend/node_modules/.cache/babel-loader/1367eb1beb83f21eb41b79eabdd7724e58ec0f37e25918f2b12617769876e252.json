{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\David Sharma\\\\Downloads\\\\DATA-EXPLORER-main (1)\\\\DATA-EXPLORER-main\\\\frontend\\\\src\\\\components\\\\ChatBot.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBot = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    sender: 'bot',\n    text: 'Hi! Ask me anything about your data, request a graph, or ask for a SQL query.'\n  }]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage = {\n      sender: 'user',\n      text: input\n    };\n    setMessages(msgs => [...msgs, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      const res = await fetch('/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: input\n        })\n      });\n      const data = await res.json();\n      if (data.type === 'graph' && data.plot_urls) {\n        setMessages(msgs => [...msgs, {\n          sender: 'bot',\n          text: data.text\n        }, ...data.plot_urls.map(url => ({\n          sender: 'bot',\n          image: url\n        }))]);\n      } else if (data.type === 'sql' && data.sql) {\n        setMessages(msgs => [...msgs, {\n          sender: 'bot',\n          text: data.text\n        }, {\n          sender: 'bot',\n          sql: data.sql\n        }]);\n      } else {\n        setMessages(msgs => [...msgs, {\n          sender: 'bot',\n          text: data.text\n        }]);\n      }\n    } catch (err) {\n      setMessages(msgs => [...msgs, {\n        sender: 'bot',\n        text: 'Sorry, something went wrong.'\n      }]);\n    }\n    setLoading(false);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') sendMessage();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-4 max-w-xl mx-auto mt-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg font-semibold mb-2\",\n      children: \"Chat with Data Explorer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-64 overflow-y-auto bg-secondary-50 p-2 rounded mb-2 border border-secondary-200\",\n      children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mb-2 ${msg.sender === 'user' ? 'text-right' : 'text-left'}`,\n        children: [msg.text && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `inline-block px-3 py-2 rounded ${msg.sender === 'user' ? 'bg-primary-100 text-primary-800' : 'bg-secondary-200 text-secondary-900'}`,\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 26\n        }, this), msg.sql && /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"bg-gray-100 text-blue-700 p-2 rounded mt-1\",\n          children: msg.sql\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this), msg.image && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: msg.image,\n          alt: \"Graph\",\n          className: \"max-w-xs rounded shadow mt-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 27\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-secondary-500\",\n        children: \"Thinking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-1 border border-secondary-300 rounded px-3 py-2\",\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: handleKeyDown,\n        placeholder: \"Ask for a graph, SQL, or data insight...\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: sendMessage,\n        disabled: loading,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatBot, \"caNOFRBLCEHZ5VKQPkx2hGVRU98=\");\n_c = ChatBot;\nexport default ChatBot;\nvar _c;\n$RefreshReg$(_c, \"ChatBot\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","ChatBot","_s","messages","setMessages","sender","text","input","setInput","loading","setLoading","sendMessage","trim","userMessage","msgs","res","fetch","method","headers","body","JSON","stringify","message","data","json","type","plot_urls","map","url","image","sql","err","handleKeyDown","e","key","className","children","fileName","_jsxFileName","lineNumber","columnNumber","msg","idx","src","alt","value","onChange","target","onKeyDown","placeholder","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/David Sharma/Downloads/DATA-EXPLORER-main (1)/DATA-EXPLORER-main/frontend/src/components/ChatBot.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst ChatBot = () => {\r\n  const [messages, setMessages] = useState([\r\n    { sender: 'bot', text: 'Hi! Ask me anything about your data, request a graph, or ask for a SQL query.' }\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n    const userMessage = { sender: 'user', text: input };\r\n    setMessages((msgs) => [...msgs, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('/api/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: input })\r\n      });\r\n      const data = await res.json();\r\n      if (data.type === 'graph' && data.plot_urls) {\r\n        setMessages((msgs) => [\r\n          ...msgs,\r\n          { sender: 'bot', text: data.text },\r\n          ...data.plot_urls.map((url) => ({ sender: 'bot', image: url }))\r\n        ]);\r\n      } else if (data.type === 'sql' && data.sql) {\r\n        setMessages((msgs) => [\r\n          ...msgs,\r\n          { sender: 'bot', text: data.text },\r\n          { sender: 'bot', sql: data.sql }\r\n        ]);\r\n      } else {\r\n        setMessages((msgs) => [...msgs, { sender: 'bot', text: data.text }]);\r\n      }\r\n    } catch (err) {\r\n      setMessages((msgs) => [...msgs, { sender: 'bot', text: 'Sorry, something went wrong.' }]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') sendMessage();\r\n  };\r\n\r\n  return (\r\n    <div className=\"card p-4 max-w-xl mx-auto mt-8\">\r\n      <h2 className=\"text-lg font-semibold mb-2\">Chat with Data Explorer</h2>\r\n      <div className=\"h-64 overflow-y-auto bg-secondary-50 p-2 rounded mb-2 border border-secondary-200\">\r\n        {messages.map((msg, idx) => (\r\n          <div key={idx} className={`mb-2 ${msg.sender === 'user' ? 'text-right' : 'text-left'}`}>\r\n            {msg.text && <div className={`inline-block px-3 py-2 rounded ${msg.sender === 'user' ? 'bg-primary-100 text-primary-800' : 'bg-secondary-200 text-secondary-900'}`}>{msg.text}</div>}\r\n            {msg.sql && <pre className=\"bg-gray-100 text-blue-700 p-2 rounded mt-1\">{msg.sql}</pre>}\r\n            {msg.image && <img src={msg.image} alt=\"Graph\" className=\"max-w-xs rounded shadow mt-2\" />}\r\n          </div>\r\n        ))}\r\n        {loading && <div className=\"text-secondary-500\">Thinking...</div>}\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          className=\"flex-1 border border-secondary-300 rounded px-3 py-2\"\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={e => setInput(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder=\"Ask for a graph, SQL, or data insight...\"\r\n          disabled={loading}\r\n        />\r\n        <button className=\"btn-primary\" onClick={sendMessage} disabled={loading}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBot; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}